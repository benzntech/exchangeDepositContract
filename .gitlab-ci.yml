image: node:12.18.3

stages:
  - test

variables:
  NODE_ENV: ci

format-check:
  stage: test
  script:
    - npm ci
    - npm run format:ci
lint-check:
  stage: test
  script:
    - npm ci
    - npm run lint
coverage-check:
  stage: test
  script:
    - npm ci
    - npm run coverage
test:
  stage: test
  services:
  - name: trufflesuite/ganache-cli:v6.9.1
    alias: ganachecli
    command: [
      "-k", "istanbul",
      "-i", "47934673",
      "-m", "absorb surface step floor dance acid run math mean word taxi bottom"
    ]
  script:
    - npm ci
    - npm run truffle
